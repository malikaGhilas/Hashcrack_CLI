<!DOCTYPE html>
<html lang="fr" data-theme="corporate">
<head>
  <meta charset="UTF-8" />
  <title>HashLab – Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.6.0/dist/full.css" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-base-200">

  <!-- Navbar -->
  <div class="navbar bg-base-100 shadow-md px-6">
    <div class="flex-1">
      <span class="text-xl font-bold tracking-wide">HashLab</span>
      <span class="badge badge-primary ml-3">Cracking Service</span>
    </div>
    <div class="flex-none gap-2">
      <button class="btn btn-ghost btn-sm" onclick="goToNewJob()">
        + Nouveau job
      </button>
      <button class="btn btn-error btn-sm" onclick="logout()">
        Déconnexion
      </button>
    </div>
  </div>

  <!-- Layout -->
  <div class="flex">
    <!-- Sidebar -->
    <aside class="w-64 bg-base-100 min-h-screen border-r hidden md:block">
      <div class="p-4">
        <p class="text-sm text-base-content/70 mb-2">Utilisateur</p>
        <p id="user-email" class="font-semibold truncate">-</p>
      </div>
      <div class="divider my-0"></div>
      <ul class="menu p-4">
        <li class="menu-title">
          <span>Navigation</span>
        </li>
        <li><a class="active">Dashboard</a></li>
        <li><a onclick="goToNewJob()">Nouveau job</a></li>
      </ul>
    </aside>

    <!-- Main -->
    <main class="flex-1 p-6 space-y-6">
      <!-- Stats -->
      <section class="grid gap-4 md:grid-cols-3">
        <div class="stat bg-base-100 shadow">
          <div class="stat-title">Jobs totaux</div>
          <div class="stat-value" id="stat-total">0</div>
        </div>
        <div class="stat bg-base-100 shadow">
          <div class="stat-title">Jobs réussis</div>
          <div class="stat-value text-success" id="stat-success">0</div>
        </div>
        <div class="stat bg-base-100 shadow">
          <div class="stat-title">Jobs en cours</div>
          <div class="stat-value text-warning" id="stat-running">0</div>
        </div>
      </section>

      <!-- Table -->
      <section class="bg-base-100 shadow rounded-xl p-4">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-xl font-semibold">Mes jobs</h2>
          <button class="btn btn-outline btn-sm" onclick="loadJobs(true)">
            Rafraîchir
          </button>
        </div>

        <div class="overflow-x-auto">
          <table class="table table-zebra w-full">
            <thead>
              <tr>
                <th>ID</th>
                <th>Stratégie</th>
                <th>Status</th>
                <th>Résultat</th>
                <th>Durée (s)</th>
                <th>Créé le</th>
              </tr>
            </thead>
            <tbody id="jobs-body">
              <!-- lignes générées en JS -->
            </tbody>
          </table>
        </div>

        <p id="jobs-empty" class="text-center text-sm text-base-content/60 mt-3 hidden">
          Aucun job pour le moment. Lancez un nouveau cracking pour commencer.
        </p>
      </section>
    </main>
  </div>

  <script src="static/js/api.js"></script>
  <script src="static/js/auth.js"></script>
  <script src="static/js/jobs.js"></script>
</body>
</html>
